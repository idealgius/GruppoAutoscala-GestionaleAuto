{% extends "base.html" %}

{% block title %}Inserisci Ricambio{% endblock %}

{% block content %}
<h1>‚ûï Inserisci Ricambio</h1>

<form action="/aggiungi_ricambio" method="POST"
      style="max-width:600px; margin:0 auto; display:flex; flex-direction:column; gap:14px;">

    <!-- =============================== -->
    <!-- NOME                            -->
    <!-- =============================== -->
    <label for="nome">Nome ricambio:</label>
    <input type="text" id="nome" name="nome" required
           value="{{ request.form.get('nome') or '' }}"
           placeholder="Esempio: Filtro Olio">

    <!-- =============================== -->
    <!-- PREFISSO CODICE PRINCIPALE      -->
    <!-- =============================== -->
    <label for="prefisso">Prefisso (opzionale):</label>
    <select id="prefisso" name="prefisso">
        <option value="">Nessuno</option>

        <option value="AVS"  {% if request.form.get('prefisso') == 'AVS' %}selected{% endif %}>AVS</option>
        <option value="BH"  {% if request.form.get('prefisso') == 'BH' %}selected{% endif %}>BH</option>
        <option value="DR"  {% if request.form.get('prefisso') == 'DR' %}selected{% endif %}>DR</option>
        <option value="MM"  {% if request.form.get('prefisso') == 'MM' %}selected{% endif %}>MM</option>
        <option value="CHA" {% if request.form.get('prefisso') == 'CHA' %}selected{% endif %}>CHA</option>
        <option value="XEN" {% if request.form.get('prefisso') == 'XEN' %}selected{% endif %}>XEN</option>
        <option value="MAN" {% if request.form.get('prefisso') == 'MAN' %}selected{% endif %}>MAN</option>
        <option value="MIC" {% if request.form.get('prefisso') == 'MIC' %}selected{% endif %}>MIC</option>
        <option value="JAP" {% if request.form.get('prefisso') == 'JAP' %}selected{% endif %}>JAP</option>
        <option value="UFI" {% if request.form.get('prefisso') == 'UFI' %}selected{% endif %}>UFI</option>
    </select>

    <!-- =============================== -->
    <!-- CODICE PRINCIPALE               -->
    <!-- =============================== -->
    <label for="codice">Codice (unico):</label>
    <input type="text" id="codice" name="codice" required
           value="{{ request.form.get('codice') or '' }}"
           placeholder="Inserisci il codice del ricambio">


    <!-- ========================================================= -->
    <!-- üîÅ RICAMBIO SOSTITUENTE (SOLO MEN√ô A TENDINA)              -->
    <!-- ========================================================= -->
    <h3 style="margin-top:20px;">üîÅ Ricambio Sostituente (opzionale)</h3>

    <label for="sost_codice_select">Seleziona ricambio sostituente:</label>
    <select id="sost_codice_select" name="sost_codice_select">
        <option value="">Nessuno</option>

        {% for r in ricambi %}
            <option value="{{ r['codice'] }}"
                {% if request.form.get('sost_codice_select') == r['codice'] %}selected{% endif %}>
                {{ r['codice'] }} ‚Äî {{ r['nome'] }}
            </option>
        {% endfor %}
    </select>


    <!-- =============================== -->
    <!-- SALVA                           -->
    <!-- =============================== -->
    <button type="submit" class="button">üíæ Salva Ricambio</button>

</form>

<div style="text-align:center; margin-top:20px;">
  <a class="button" href="/ricambi">üîô Torna ai ricambi</a>
</div>

{% endblock %}
