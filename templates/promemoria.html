<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Promemoria</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h2>Promemoria</h2>
    <hr>

    <!-- Form per inserire nuovo promemoria -->
    <div class="card mb-3">
        <div class="card-body">
            <form method="POST" action="{{ url_for('aggiungi_promemoria') }}">
                <div class="mb-2">
                    <input type="text" name="titolo" class="form-control" placeholder="Titolo" required>
                </div>
                <div class="mb-2">
                    <textarea name="descrizione" class="form-control" placeholder="Descrizione" required></textarea>
                </div>
                <button type="submit" class="btn btn-success btn-sm">Aggiungi Promemoria</button>
            </form>
        </div>
    </div>

    {% for prom in promemoria %}
    <div class="card mb-2">
        <div class="card-body">
            <h5 class="card-title">{{ prom.titolo }}</h5>
            <p class="card-text">{{ prom.descrizione }}</p>
            <p class="text-muted mb-1">
                Creato da: {{ prom.username }} |
                Data: {{ prom.data_creazione.strftime('%d/%m/%Y %H:%M') }}
            </p>

            {% if session['ruolo'] == 'accettazione' or prom.user_id == session['user_id'] %}
            <form method="POST" action="{{ url_for('elimina_promemoria', id=prom.id) }}" class="d-inline">
                <button type="submit" class="btn btn-danger btn-sm">Elimina</button>
            </form>
            {% endif %}
        </div>
    </div>
    {% else %}
    <p>Nessun promemoria presente.</p>
    {% endfor %}
</div>
</body>
</html>
